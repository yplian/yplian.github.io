{"title":"高程笔记-对象1","slug":"高程笔记-对象1","date":"2017-02-08T16:00:00.000Z","updated":"2017-02-08T16:00:00.000Z","comments":true,"path":"api/articles/高程笔记-对象1.json","excerpt":"《JavaScript高级程序》笔记，主要关于对象属性以及对象的创建方式。<br>","covers":null,"content":"<p>《JavaScript高级程序》笔记，主要关于对象属性以及对象的创建方式。<br><a id=\"more\"></a></p>\n<p>最简单的创建方式是通过Object。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\">person.name = <span class=\"string\">\"xiaoming\"</span>;</span><br><span class=\"line\">person.age = <span class=\"string\">\"12\"</span>;</span><br><span class=\"line\">person.job = <span class=\"string\">\"student\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">person.sayName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"属性类型\"><a href=\"#属性类型\" class=\"headerlink\" title=\"属性类型\"></a>属性类型</h2><h3 id=\"属性分类\"><a href=\"#属性分类\" class=\"headerlink\" title=\"属性分类\"></a>属性分类</h3><p>ECMA-262定义描述内部特性，有两种（只能为其中一种），如下：</p>\n<table>\n<thead>\n<tr>\n<th>数据属性</th>\n<th>访问器属性</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>[[ Configurable ]]</td>\n<td>[[ Configurable ]]</td>\n</tr>\n<tr>\n<td>[[ Enumerable ]]</td>\n<td>[[ Enumerable ]]</td>\n</tr>\n<tr>\n<td>[[ Writable ]]</td>\n<td></td>\n</tr>\n<tr>\n<td>[[ Value ]]</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[[ Get ]]</td>\n</tr>\n<tr>\n<td></td>\n<td>[[ Set ]]</td>\n</tr>\n</tbody>\n</table>\n<p><code>[[ Configurable ]]</code>：表示能否被<code>delete</code>删除重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性。</p>\n<p><code>[[ Enumerable ]]</code>：表示能否被<code>for-in</code>循环返回属性。</p>\n<p><code>[[ Writable ]]</code>：表示能否修改属性的值。</p>\n<p><code>[[ Value ]]</code>：包含这个属性的数据值。读取属性值时，从这个位置读取；写入属性值的时候，把新值保存在这个位置。默认undefined。</p>\n<p><code>[[ Get ]]</code>：在读取属性时掉用的函数。默认值为undefined。</p>\n<p><code>[[ Set ]]</code>：在写入属性时掉用的函数。默认值为undefined。</p>\n<p>设置默认属性需要es5的<code>Object.definedProperty()</code>方法。例如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> person = &#123;&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperty(person,<span class=\"string\">'name'</span>,&#123;</span><br><span class=\"line\">    writable : <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"string\">'xiaoMing'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name); <span class=\"comment\">// 'xiaoMing'</span></span><br><span class=\"line\">person.name = <span class=\"string\">'xiaoHong'</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name); <span class=\"comment\">// 'xiaoMing'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperty(person,<span class=\"string\">'name'</span>,&#123;</span><br><span class=\"line\">    configurable : <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"string\">'xiaoMing'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name); <span class=\"comment\">// 'xiaoMing'</span></span><br><span class=\"line\">person.name = <span class=\"string\">'xiaoHong'</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name); <span class=\"comment\">// 'xiaoMing'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 报错</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperty(person,<span class=\"string\">'name'</span>,&#123;</span><br><span class=\"line\">    configurable : <span class=\"literal\">true</span>,</span><br><span class=\"line\">    value: <span class=\"string\">'xiaoMing'</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"单属性定义\"><a href=\"#单属性定义\" class=\"headerlink\" title=\"单属性定义\"></a>单属性定义</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> book = &#123;</span><br><span class=\"line\">    _year: <span class=\"number\">2004</span>,</span><br><span class=\"line\">    edition: <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperty(book,<span class=\"string\">'year'</span>,&#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>: function ()&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._year;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">set</span>: function(newValue)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>( newValue &gt; <span class=\"number\">2004</span> )&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>._year = newValue;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.edition += newValue - <span class=\"number\">2004</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">book.year = <span class=\"number\">2005</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( book.edition ) <span class=\"comment\">//2</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"多属性定义\"><a href=\"#多属性定义\" class=\"headerlink\" title=\"多属性定义\"></a>多属性定义</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> book = &#123; &#125;;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperties(book,&#123;</span><br><span class=\"line\">    _year：&#123;</span><br><span class=\"line\">        value: <span class=\"number\">2004</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    edition: &#123;</span><br><span class=\"line\">        value: <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    year: &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span>: function ()&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._year;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"keyword\">set</span>: function(newValue)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>( newValue &gt; <span class=\"number\">2004</span> )&#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>._year = newValue;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.edition += newValue - <span class=\"number\">2004</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> descriptor = <span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(book,<span class=\"string\">\"_year\"</span>);</span><br><span class=\"line\">alert(descriptor.value) <span class=\"comment\">//2004</span></span><br><span class=\"line\">alert(descriptor.configurable) <span class=\"comment\">//false</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"创建对象\"><a href=\"#创建对象\" class=\"headerlink\" title=\"创建对象\"></a>创建对象</h2><h3 id=\"工厂模式\"><a href=\"#工厂模式\" class=\"headerlink\" title=\"工厂模式\"></a>工厂模式</h3><p>对象的识别不明确。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createPerson</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> o = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\">    o.name = name;</span><br><span class=\"line\">    o.age = age;</span><br><span class=\"line\">    o.job = job;</span><br><span class=\"line\">    o.sayName =<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = createPerson(<span class=\"string\">'Nicholas'</span>,<span class=\"string\">'29'</span>,<span class=\"string\">'teacher'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> person2 = createPerson(<span class=\"string\">'Greg'</span>,<span class=\"string\">'19'</span>,<span class=\"string\">'student'</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"构造函数模式\"><a href=\"#构造函数模式\" class=\"headerlink\" title=\"构造函数模式\"></a>构造函数模式</h3><p>方法的重复创建，即每个实例上面都会创建一个方法。如下例中，person1和person2都含有sayName()的方法。如果将sayName()单独提取出来，当方法很多的时候，就会出现污染全局变量的问题。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.job = job;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.sayName =<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Nicholas'</span>,<span class=\"string\">'29'</span>,<span class=\"string\">'teacher'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> person2 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Greg'</span>,<span class=\"string\">'19'</span>,<span class=\"string\">'student'</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"原型模式\"><a href=\"#原型模式\" class=\"headerlink\" title=\"原型模式\"></a>原型模式</h3><p>解决了方法会污染环境变量的问题，但是对于数组、对象这种引用类型，可能会出现如下例的问题。虽然<code>friends</code>属性不同，但是指向的同一地址，从而影响其它实例。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">Person.prototype = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Nicholas'</span>,</span><br><span class=\"line\">    age:<span class=\"string\">'29'</span>,</span><br><span class=\"line\">    job:<span class=\"string\">'teacher'</span>,</span><br><span class=\"line\">    friends:[<span class=\"string\">'lucy'</span>,<span class=\"string\">'jon'</span>,<span class=\"string\">'angus'</span>],</span><br><span class=\"line\">    sayName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">person1.sayName() <span class=\"comment\">// 'Nicholas'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person2 = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">person2.sayName() <span class=\"comment\">// 'Nicholas'</span></span><br><span class=\"line\"></span><br><span class=\"line\">person1.friends.push(<span class=\"string\">'van'</span>);</span><br><span class=\"line\">alert(person1.friends); <span class=\"comment\">//'lucy','jon','angus'</span></span><br><span class=\"line\">alert(person2.friends); <span class=\"comment\">//'lucy','jon','angus'</span></span><br><span class=\"line\">alert(person1.friends === person2.friends); <span class=\"comment\">//true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"组合构造函数和原型模式\"><a href=\"#组合构造函数和原型模式\" class=\"headerlink\" title=\"组合构造函数和原型模式\"></a>组合构造函数和原型模式</h3><p>常用的一种创建方式。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.job = job;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.friends = [<span class=\"string\">'lucy'</span>,<span class=\"string\">'jon'</span>,<span class=\"string\">'angus'</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype = &#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>: Person,</span><br><span class=\"line\">    sayName: function()&#123;</span><br><span class=\"line\">        alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Nicholas'</span>,<span class=\"string\">'29'</span>,<span class=\"string\">'teacher'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> person2 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Greg'</span>,<span class=\"string\">'19'</span>,<span class=\"string\">'student'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">person1.friends.push(<span class=\"string\">'van'</span>);</span><br><span class=\"line\">alert(person1.friends); <span class=\"comment\">//'lucy','jon','angus'</span></span><br><span class=\"line\">alert(person2.friends); <span class=\"comment\">//'lucy','jon'</span></span><br><span class=\"line\">alert(person1.friends === person2.friends); <span class=\"comment\">//false</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"动态原型模式\"><a href=\"#动态原型模式\" class=\"headerlink\" title=\"动态原型模式\"></a>动态原型模式</h3><p>初次执行函数时，会触发判断。原型不能使用字面量的模式创建，相当于重写，会出现丢失构造函数的问题。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.job = job;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"keyword\">this</span>.sayName != <span class=\"string\">'function'</span> )&#123;</span><br><span class=\"line\">        Person.prototpe.sayName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"稳妥构造函数模式\"><a href=\"#稳妥构造函数模式\" class=\"headerlink\" title=\"稳妥构造函数模式\"></a>稳妥构造函数模式</h3><p>name只能由sayName()函数访问属性，通过提供安全性，特殊情况使用。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> o = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\">    o.sayName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">         alert(name);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = Person(<span class=\"string\">'Nicholas'</span>,<span class=\"string\">'29'</span>,<span class=\"string\">'teacher'</span>);</span><br><span class=\"line\">person1.sayName(); <span class=\"comment\">// Nicholas</span></span><br></pre></td></tr></table></figure>\n","more":"</p>\n<p>最简单的创建方式是通过Object。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\">person.name = <span class=\"string\">\"xiaoming\"</span>;</span><br><span class=\"line\">person.age = <span class=\"string\">\"12\"</span>;</span><br><span class=\"line\">person.job = <span class=\"string\">\"student\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">person.sayName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"属性类型\"><a href=\"#属性类型\" class=\"headerlink\" title=\"属性类型\"></a>属性类型</h2><h3 id=\"属性分类\"><a href=\"#属性分类\" class=\"headerlink\" title=\"属性分类\"></a>属性分类</h3><p>ECMA-262定义描述内部特性，有两种（只能为其中一种），如下：</p>\n<table>\n<thead>\n<tr>\n<th>数据属性</th>\n<th>访问器属性</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>[[ Configurable ]]</td>\n<td>[[ Configurable ]]</td>\n</tr>\n<tr>\n<td>[[ Enumerable ]]</td>\n<td>[[ Enumerable ]]</td>\n</tr>\n<tr>\n<td>[[ Writable ]]</td>\n<td></td>\n</tr>\n<tr>\n<td>[[ Value ]]</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[[ Get ]]</td>\n</tr>\n<tr>\n<td></td>\n<td>[[ Set ]]</td>\n</tr>\n</tbody>\n</table>\n<p><code>[[ Configurable ]]</code>：表示能否被<code>delete</code>删除重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性。</p>\n<p><code>[[ Enumerable ]]</code>：表示能否被<code>for-in</code>循环返回属性。</p>\n<p><code>[[ Writable ]]</code>：表示能否修改属性的值。</p>\n<p><code>[[ Value ]]</code>：包含这个属性的数据值。读取属性值时，从这个位置读取；写入属性值的时候，把新值保存在这个位置。默认undefined。</p>\n<p><code>[[ Get ]]</code>：在读取属性时掉用的函数。默认值为undefined。</p>\n<p><code>[[ Set ]]</code>：在写入属性时掉用的函数。默认值为undefined。</p>\n<p>设置默认属性需要es5的<code>Object.definedProperty()</code>方法。例如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> person = &#123;&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperty(person,<span class=\"string\">'name'</span>,&#123;</span><br><span class=\"line\">    writable : <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"string\">'xiaoMing'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name); <span class=\"comment\">// 'xiaoMing'</span></span><br><span class=\"line\">person.name = <span class=\"string\">'xiaoHong'</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name); <span class=\"comment\">// 'xiaoMing'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperty(person,<span class=\"string\">'name'</span>,&#123;</span><br><span class=\"line\">    configurable : <span class=\"literal\">false</span>,</span><br><span class=\"line\">    value: <span class=\"string\">'xiaoMing'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name); <span class=\"comment\">// 'xiaoMing'</span></span><br><span class=\"line\">person.name = <span class=\"string\">'xiaoHong'</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name); <span class=\"comment\">// 'xiaoMing'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 报错</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperty(person,<span class=\"string\">'name'</span>,&#123;</span><br><span class=\"line\">    configurable : <span class=\"literal\">true</span>,</span><br><span class=\"line\">    value: <span class=\"string\">'xiaoMing'</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"单属性定义\"><a href=\"#单属性定义\" class=\"headerlink\" title=\"单属性定义\"></a>单属性定义</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> book = &#123;</span><br><span class=\"line\">    _year: <span class=\"number\">2004</span>,</span><br><span class=\"line\">    edition: <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperty(book,<span class=\"string\">'year'</span>,&#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>: function ()&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._year;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">set</span>: function(newValue)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>( newValue &gt; <span class=\"number\">2004</span> )&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>._year = newValue;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.edition += newValue - <span class=\"number\">2004</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">book.year = <span class=\"number\">2005</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( book.edition ) <span class=\"comment\">//2</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"多属性定义\"><a href=\"#多属性定义\" class=\"headerlink\" title=\"多属性定义\"></a>多属性定义</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> book = &#123; &#125;;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.definedProperties(book,&#123;</span><br><span class=\"line\">    _year：&#123;</span><br><span class=\"line\">        value: <span class=\"number\">2004</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    edition: &#123;</span><br><span class=\"line\">        value: <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    year: &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span>: function ()&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._year;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"keyword\">set</span>: function(newValue)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>( newValue &gt; <span class=\"number\">2004</span> )&#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>._year = newValue;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.edition += newValue - <span class=\"number\">2004</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> descriptor = <span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(book,<span class=\"string\">\"_year\"</span>);</span><br><span class=\"line\">alert(descriptor.value) <span class=\"comment\">//2004</span></span><br><span class=\"line\">alert(descriptor.configurable) <span class=\"comment\">//false</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"创建对象\"><a href=\"#创建对象\" class=\"headerlink\" title=\"创建对象\"></a>创建对象</h2><h3 id=\"工厂模式\"><a href=\"#工厂模式\" class=\"headerlink\" title=\"工厂模式\"></a>工厂模式</h3><p>对象的识别不明确。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createPerson</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> o = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\">    o.name = name;</span><br><span class=\"line\">    o.age = age;</span><br><span class=\"line\">    o.job = job;</span><br><span class=\"line\">    o.sayName =<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = createPerson(<span class=\"string\">'Nicholas'</span>,<span class=\"string\">'29'</span>,<span class=\"string\">'teacher'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> person2 = createPerson(<span class=\"string\">'Greg'</span>,<span class=\"string\">'19'</span>,<span class=\"string\">'student'</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"构造函数模式\"><a href=\"#构造函数模式\" class=\"headerlink\" title=\"构造函数模式\"></a>构造函数模式</h3><p>方法的重复创建，即每个实例上面都会创建一个方法。如下例中，person1和person2都含有sayName()的方法。如果将sayName()单独提取出来，当方法很多的时候，就会出现污染全局变量的问题。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.job = job;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.sayName =<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Nicholas'</span>,<span class=\"string\">'29'</span>,<span class=\"string\">'teacher'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> person2 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Greg'</span>,<span class=\"string\">'19'</span>,<span class=\"string\">'student'</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"原型模式\"><a href=\"#原型模式\" class=\"headerlink\" title=\"原型模式\"></a>原型模式</h3><p>解决了方法会污染环境变量的问题，但是对于数组、对象这种引用类型，可能会出现如下例的问题。虽然<code>friends</code>属性不同，但是指向的同一地址，从而影响其它实例。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">Person.prototype = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Nicholas'</span>,</span><br><span class=\"line\">    age:<span class=\"string\">'29'</span>,</span><br><span class=\"line\">    job:<span class=\"string\">'teacher'</span>,</span><br><span class=\"line\">    friends:[<span class=\"string\">'lucy'</span>,<span class=\"string\">'jon'</span>,<span class=\"string\">'angus'</span>],</span><br><span class=\"line\">    sayName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">person1.sayName() <span class=\"comment\">// 'Nicholas'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person2 = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">person2.sayName() <span class=\"comment\">// 'Nicholas'</span></span><br><span class=\"line\"></span><br><span class=\"line\">person1.friends.push(<span class=\"string\">'van'</span>);</span><br><span class=\"line\">alert(person1.friends); <span class=\"comment\">//'lucy','jon','angus'</span></span><br><span class=\"line\">alert(person2.friends); <span class=\"comment\">//'lucy','jon','angus'</span></span><br><span class=\"line\">alert(person1.friends === person2.friends); <span class=\"comment\">//true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"组合构造函数和原型模式\"><a href=\"#组合构造函数和原型模式\" class=\"headerlink\" title=\"组合构造函数和原型模式\"></a>组合构造函数和原型模式</h3><p>常用的一种创建方式。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.job = job;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.friends = [<span class=\"string\">'lucy'</span>,<span class=\"string\">'jon'</span>,<span class=\"string\">'angus'</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype = &#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>: Person,</span><br><span class=\"line\">    sayName: function()&#123;</span><br><span class=\"line\">        alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Nicholas'</span>,<span class=\"string\">'29'</span>,<span class=\"string\">'teacher'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> person2 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'Greg'</span>,<span class=\"string\">'19'</span>,<span class=\"string\">'student'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">person1.friends.push(<span class=\"string\">'van'</span>);</span><br><span class=\"line\">alert(person1.friends); <span class=\"comment\">//'lucy','jon','angus'</span></span><br><span class=\"line\">alert(person2.friends); <span class=\"comment\">//'lucy','jon'</span></span><br><span class=\"line\">alert(person1.friends === person2.friends); <span class=\"comment\">//false</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"动态原型模式\"><a href=\"#动态原型模式\" class=\"headerlink\" title=\"动态原型模式\"></a>动态原型模式</h3><p>初次执行函数时，会触发判断。原型不能使用字面量的模式创建，相当于重写，会出现丢失构造函数的问题。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.job = job;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"keyword\">this</span>.sayName != <span class=\"string\">'function'</span> )&#123;</span><br><span class=\"line\">        Person.prototpe.sayName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            alert(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"稳妥构造函数模式\"><a href=\"#稳妥构造函数模式\" class=\"headerlink\" title=\"稳妥构造函数模式\"></a>稳妥构造函数模式</h3><p>name只能由sayName()函数访问属性，通过提供安全性，特殊情况使用。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name,age,job</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> o = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\">    o.sayName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">         alert(name);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> person1 = Person(<span class=\"string\">'Nicholas'</span>,<span class=\"string\">'29'</span>,<span class=\"string\">'teacher'</span>);</span><br><span class=\"line\">person1.sayName(); <span class=\"comment\">// Nicholas</span></span><br></pre></td></tr></table></figure>","categories":[{"name":"js","path":"api/categories/js.json"}],"tags":[{"name":"笔记","path":"api/tags/笔记.json"},{"name":"Object","path":"api/tags/Object.json"}]}