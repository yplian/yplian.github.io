{"title":"module","slug":"module","date":"2017-11-14T16:00:00.000Z","updated":"2017-11-14T16:00:00.000Z","comments":true,"path":"api/articles/module.json","excerpt":"之前node笔记中有提到关于模块的概念，在此总结一下AMD、CMD、CommonJS和es6模块。<br>","covers":null,"content":"<p>之前<a href=\"/node笔记/\">node笔记</a>中有提到关于模块的概念，在此总结一下AMD、CMD、CommonJS和es6模块。<br><a id=\"more\"></a></p>\n<h2 id=\"AMD和CMD概念\"><a href=\"#AMD和CMD概念\" class=\"headerlink\" title=\"AMD和CMD概念\"></a>AMD和CMD概念</h2><p>之前的JavaScript没有模块这一功能，后来出现了<a href=\"https://github.com/seajs/seajs/issues/242\" target=\"_blank\" rel=\"noopener\">CMD</a>和<a href=\"https://github.com/amdjs/amdjs-api/wiki/AMD\" target=\"_blank\" rel=\"noopener\">AMD</a>这两种方式。</p>\n<blockquote>\n<p>AMD（Asynchronous Module Definition）是 RequireJS 在推广过程中对模块定义的规范化产出。提前执行，推崇依赖前置<br>CMD（Common Module Definition）在推广过程中对模块定义的规范化体现是 SeaJS。延迟执行，推崇依赖就近</p>\n</blockquote>\n<h3 id=\"AMD的基本用法\"><a href=\"#AMD的基本用法\" class=\"headerlink\" title=\"AMD的基本用法\"></a>AMD的基本用法</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(id?, dependencies?, factory);</span><br><span class=\"line\"><span class=\"comment\">//模块的名字?,所依赖模块的数组?执行的函数或对象</span></span><br><span class=\"line\"></span><br><span class=\"line\">define([<span class=\"string\">'./a,./b'</span>],<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a,b</span>)</span>&#123;</span><br><span class=\"line\">    a.doSomething();</span><br><span class=\"line\">    b.doSomething();</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"CMD的基本用法\"><a href=\"#CMD的基本用法\" class=\"headerlink\" title=\"CMD的基本用法\"></a>CMD的基本用法</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(id?, dependencies?, factory);</span><br><span class=\"line\"><span class=\"comment\">//模块的名字?,所依赖模块的数组?执行的函数或对象,不推荐带id和dependencies</span></span><br><span class=\"line\"></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require,exports,module</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"built_in\">require</span>(<span class=\"string\">\"./a\"</span>);</span><br><span class=\"line\">    a.doSomething();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> b = <span class=\"built_in\">require</span>(<span class=\"string\">\"./b\"</span>)</span><br><span class=\"line\">    b.doSomething();</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// exports 是 module.exports 的引用，对外返回接口，可以通过以下方式</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require,exports,module</span>)</span>&#123;</span><br><span class=\"line\">    exports.foo = <span class=\"string\">'exports prop'</span>;</span><br><span class=\"line\">    exports.doSomething = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">//export function&#125;;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 等于 return &#123;&#125;</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require,exports,module</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        foo: <span class=\"string\">'exports prop'</span>,</span><br><span class=\"line\">        doSomething: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">//export function&#125;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 等于 module.exports</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require,exports,module</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">        foo: <span class=\"string\">'exports prop'</span>,</span><br><span class=\"line\">        doSomething: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">//export function&#125;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"CommonJS和es6模块\"><a href=\"#CommonJS和es6模块\" class=\"headerlink\" title=\"CommonJS和es6模块\"></a>CommonJS和es6模块</h2><p>AMD和CMD都属于浏览器端模块开发的规范。CommonJS 是服务端的规范，Node.js 采用了这个规范。</p>\n<ul>\n<li>CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</li>\n<li>CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。</li>\n</ul>\n<h3 id=\"CommonJS\"><a href=\"#CommonJS\" class=\"headerlink\" title=\"CommonJS\"></a>CommonJS</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// a.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'a.js'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'this file is a.js'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    name: name,</span><br><span class=\"line\">    method: fn</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> &#123;name,method&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'./a'</span>);</span><br><span class=\"line\">method();<span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(name);<span class=\"comment\">//this file is a.js</span></span><br><span class=\"line\"><span class=\"comment\">//等于</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> file = <span class=\"built_in\">require</span>(<span class=\"string\">'./a'</span>);</span><br><span class=\"line\">file.method();<span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(file.name);<span class=\"comment\">//this file is a.js</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"es6模块\"><a href=\"#es6模块\" class=\"headerlink\" title=\"es6模块\"></a>es6模块</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// a.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> name = <span class=\"string\">'a.js'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">'this file is a.js'</span>) &#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123;name,fn <span class=\"keyword\">as</span> method&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; name,method &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./a'</span>;</span><br><span class=\"line\">method();<span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(name);<span class=\"comment\">//this file is a.js</span></span><br></pre></td></tr></table></figure>\n<p>参考链接<br><a href=\"https://github.com/seajs/seajs/issues/242\" target=\"_blank\" rel=\"noopener\">https://github.com/seajs/seajs/issues/242</a><br><a href=\"https://github.com/amdjs/amdjs-api/wiki/AMD\" target=\"_blank\" rel=\"noopener\">https://github.com/amdjs/amdjs-api/wiki/AMD</a><br><a href=\"http://es6.ruanyifeng.com/#docs/module\" target=\"_blank\" rel=\"noopener\">http://es6.ruanyifeng.com/#docs/module</a></p>\n","more":"</p>\n<h2 id=\"AMD和CMD概念\"><a href=\"#AMD和CMD概念\" class=\"headerlink\" title=\"AMD和CMD概念\"></a>AMD和CMD概念</h2><p>之前的JavaScript没有模块这一功能，后来出现了<a href=\"https://github.com/seajs/seajs/issues/242\" target=\"_blank\" rel=\"noopener\">CMD</a>和<a href=\"https://github.com/amdjs/amdjs-api/wiki/AMD\" target=\"_blank\" rel=\"noopener\">AMD</a>这两种方式。</p>\n<blockquote>\n<p>AMD（Asynchronous Module Definition）是 RequireJS 在推广过程中对模块定义的规范化产出。提前执行，推崇依赖前置<br>CMD（Common Module Definition）在推广过程中对模块定义的规范化体现是 SeaJS。延迟执行，推崇依赖就近</p>\n</blockquote>\n<h3 id=\"AMD的基本用法\"><a href=\"#AMD的基本用法\" class=\"headerlink\" title=\"AMD的基本用法\"></a>AMD的基本用法</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(id?, dependencies?, factory);</span><br><span class=\"line\"><span class=\"comment\">//模块的名字?,所依赖模块的数组?执行的函数或对象</span></span><br><span class=\"line\"></span><br><span class=\"line\">define([<span class=\"string\">'./a,./b'</span>],<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a,b</span>)</span>&#123;</span><br><span class=\"line\">    a.doSomething();</span><br><span class=\"line\">    b.doSomething();</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"CMD的基本用法\"><a href=\"#CMD的基本用法\" class=\"headerlink\" title=\"CMD的基本用法\"></a>CMD的基本用法</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(id?, dependencies?, factory);</span><br><span class=\"line\"><span class=\"comment\">//模块的名字?,所依赖模块的数组?执行的函数或对象,不推荐带id和dependencies</span></span><br><span class=\"line\"></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require,exports,module</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"built_in\">require</span>(<span class=\"string\">\"./a\"</span>);</span><br><span class=\"line\">    a.doSomething();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> b = <span class=\"built_in\">require</span>(<span class=\"string\">\"./b\"</span>)</span><br><span class=\"line\">    b.doSomething();</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// exports 是 module.exports 的引用，对外返回接口，可以通过以下方式</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require,exports,module</span>)</span>&#123;</span><br><span class=\"line\">    exports.foo = <span class=\"string\">'exports prop'</span>;</span><br><span class=\"line\">    exports.doSomething = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">//export function&#125;;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 等于 return &#123;&#125;</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require,exports,module</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        foo: <span class=\"string\">'exports prop'</span>,</span><br><span class=\"line\">        doSomething: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">//export function&#125;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 等于 module.exports</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require,exports,module</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">        foo: <span class=\"string\">'exports prop'</span>,</span><br><span class=\"line\">        doSomething: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">//export function&#125;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"CommonJS和es6模块\"><a href=\"#CommonJS和es6模块\" class=\"headerlink\" title=\"CommonJS和es6模块\"></a>CommonJS和es6模块</h2><p>AMD和CMD都属于浏览器端模块开发的规范。CommonJS 是服务端的规范，Node.js 采用了这个规范。</p>\n<ul>\n<li>CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</li>\n<li>CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。</li>\n</ul>\n<h3 id=\"CommonJS\"><a href=\"#CommonJS\" class=\"headerlink\" title=\"CommonJS\"></a>CommonJS</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// a.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'a.js'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'this file is a.js'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    name: name,</span><br><span class=\"line\">    method: fn</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> &#123;name,method&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'./a'</span>);</span><br><span class=\"line\">method();<span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(name);<span class=\"comment\">//this file is a.js</span></span><br><span class=\"line\"><span class=\"comment\">//等于</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> file = <span class=\"built_in\">require</span>(<span class=\"string\">'./a'</span>);</span><br><span class=\"line\">file.method();<span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(file.name);<span class=\"comment\">//this file is a.js</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"es6模块\"><a href=\"#es6模块\" class=\"headerlink\" title=\"es6模块\"></a>es6模块</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// a.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> name = <span class=\"string\">'a.js'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">'this file is a.js'</span>) &#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123;name,fn <span class=\"keyword\">as</span> method&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; name,method &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./a'</span>;</span><br><span class=\"line\">method();<span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(name);<span class=\"comment\">//this file is a.js</span></span><br></pre></td></tr></table></figure>\n<p>参考链接<br><a href=\"https://github.com/seajs/seajs/issues/242\" target=\"_blank\" rel=\"noopener\">https://github.com/seajs/seajs/issues/242</a><br><a href=\"https://github.com/amdjs/amdjs-api/wiki/AMD\" target=\"_blank\" rel=\"noopener\">https://github.com/amdjs/amdjs-api/wiki/AMD</a><br><a href=\"http://es6.ruanyifeng.com/#docs/module\" target=\"_blank\" rel=\"noopener\">http://es6.ruanyifeng.com/#docs/module</a></p>","categories":[{"name":"js","path":"api/categories/js.json"}],"tags":[{"name":"es6","path":"api/tags/es6.json"},{"name":"node","path":"api/tags/node.json"},{"name":"module","path":"api/tags/module.json"}]}