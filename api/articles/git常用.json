{"title":"git常用","slug":"git常用","date":"2017-03-29T16:00:00.000Z","updated":"2020-05-31T16:00:00.000Z","comments":true,"path":"api/articles/git常用.json","excerpt":"git工具的安装下载流程，以及git的常用语法，参照git官网。建议合理运用git --help。<br>","covers":["/images/git_01.png"],"content":"<p>git工具的安装下载流程，以及git的常用语法，参照git官网。建议合理运用<code>git --help</code>。<br><a id=\"more\"></a></p>\n<h2 id=\"下载安装git\"><a href=\"#下载安装git\" class=\"headerlink\" title=\"下载安装git\"></a>下载安装git</h2><p>在Windows上安装需在官网<a href=\"https://git-scm.com/downloads\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/downloads</a>下载，傻瓜式安装，默认下一步，添加环境变量路径（默认勾选）。</p>\n<h3 id=\"测试是否安装成功\"><a href=\"#测试是否安装成功\" class=\"headerlink\" title=\"测试是否安装成功\"></a>测试是否安装成功</h3><p>安装完成后通过<code>git --version</code>测试是否安装成功，成功会出现版本号。<br><img src=\"/images/git_01.png\" alt=\"1\"></p>\n<h3 id=\"运行前配置\"><a href=\"#运行前配置\" class=\"headerlink\" title=\"运行前配置\"></a>运行前配置</h3><p>用户信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name &quot;Your Name&quot;</span><br><span class=\"line\">git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure>\n<p>文本编辑器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global core.editor emacs</span><br></pre></td></tr></table></figure>\n<p>检查配置信息<code>$ git config --list</code></p>\n<hr>\n<h2 id=\"常用语法\"><a href=\"#常用语法\" class=\"headerlink\" title=\"常用语法\"></a>常用语法</h2><h3 id=\"获取帮助\"><a href=\"#获取帮助\" class=\"headerlink\" title=\"获取帮助\"></a>获取帮助</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git --help</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建版本库\"><a href=\"#创建版本库\" class=\"headerlink\" title=\"创建版本库\"></a>创建版本库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir yourDir</span><br><span class=\"line\">cd yourDir</span><br><span class=\"line\">git init</span><br></pre></td></tr></table></figure>\n<h3 id=\"添加暂存区\"><a href=\"#添加暂存区\" class=\"headerlink\" title=\"添加暂存区\"></a>添加暂存区</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add *.c</span><br><span class=\"line\">git add LICENSE</span><br></pre></td></tr></table></figure>\n<h3 id=\"提交更新\"><a href=\"#提交更新\" class=\"headerlink\" title=\"提交更新\"></a>提交更新</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m &apos;initial project version&apos;</span><br></pre></td></tr></table></figure>\n<p>快捷添加暂存区并提交 <code>$ git commit -a -m &#39;initial project version&#39;</code></p>\n<h3 id=\"克隆现有仓库\"><a href=\"#克隆现有仓库\" class=\"headerlink\" title=\"克隆现有仓库\"></a>克隆现有仓库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone [url]</span><br></pre></td></tr></table></figure>\n<h3 id=\"检查文件当前状态\"><a href=\"#检查文件当前状态\" class=\"headerlink\" title=\"检查文件当前状态\"></a>检查文件当前状态</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status</span><br></pre></td></tr></table></figure>\n<h3 id=\"忽略文件\"><a href=\"#忽略文件\" class=\"headerlink\" title=\"忽略文件\"></a>忽略文件</h3><p>在.gitignore中可以通过正则或者添加文件来忽略git的监视，例如如下文件配置。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.DS_Store</span><br><span class=\"line\">Thumbs.db</span><br><span class=\"line\">db.json</span><br><span class=\"line\">*.log</span><br><span class=\"line\">node_modules/</span><br><span class=\"line\">public/</span><br><span class=\"line\">.deploy*/</span><br></pre></td></tr></table></figure>\n<h3 id=\"移除文件\"><a href=\"#移除文件\" class=\"headerlink\" title=\"移除文件\"></a>移除文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rm [file]</span><br></pre></td></tr></table></figure>\n<h3 id=\"移动文件\"><a href=\"#移动文件\" class=\"headerlink\" title=\"移动文件\"></a>移动文件</h3><p>git不能移动文件，可以看做改名，重命名。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git mv file_from file_to</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看提交历史\"><a href=\"#查看提交历史\" class=\"headerlink\" title=\"查看提交历史\"></a>查看提交历史</h3><p>默认不用任何参数的话，git log 会按提交时间列出所有的更新，最近的更新排在最上面。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log</span><br></pre></td></tr></table></figure>\n<p>一个常用的选项是 -p，用来显示每次提交的内容差异。 你也可以加上 -2 来仅显示最近两次提交：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log -p -2</span><br></pre></td></tr></table></figure>\n<p>More info      <a href=\"https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History</a></p>\n<h3 id=\"撤销操作\"><a href=\"#撤销操作\" class=\"headerlink\" title=\"撤销操作\"></a>撤销操作</h3><h4 id=\"取消暂存的文件\"><a href=\"#取消暂存的文件\" class=\"headerlink\" title=\"取消暂存的文件\"></a>取消暂存的文件</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset HEAD &lt;file&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改上一次提交\"><a href=\"#修改上一次提交\" class=\"headerlink\" title=\"修改上一次提交\"></a>修改上一次提交</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m &apos;initial commit&apos;</span><br><span class=\"line\">git add forgotten_file</span><br><span class=\"line\">git commit --amend</span><br></pre></td></tr></table></figure>\n<p>More info <a href=\"https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things</a></p>\n<h3 id=\"远程仓库\"><a href=\"#远程仓库\" class=\"headerlink\" title=\"远程仓库\"></a>远程仓库</h3><h4 id=\"查看远程仓库\"><a href=\"#查看远程仓库\" class=\"headerlink\" title=\"查看远程仓库\"></a>查看远程仓库</h4><p>加参数-v，可以看到url，不加只有简写名称<br>加show [remote-name]，可以获取该仓库的具体信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote -v</span><br></pre></td></tr></table></figure>\n<h4 id=\"添加远程仓库\"><a href=\"#添加远程仓库\" class=\"headerlink\" title=\"添加远程仓库\"></a>添加远程仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add &lt;shortname&gt; &lt;url&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"拉取远程仓库\"><a href=\"#拉取远程仓库\" class=\"headerlink\" title=\"拉取远程仓库\"></a>拉取远程仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git fetch [remote-name]</span><br></pre></td></tr></table></figure>\n<p>git fetch 与 git pull的区别在于，git fetch不会自动merge，需要你手动完成。</p>\n<h4 id=\"推送远程仓库\"><a href=\"#推送远程仓库\" class=\"headerlink\" title=\"推送远程仓库\"></a>推送远程仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push [remote-name] [branch-name]</span><br><span class=\"line\"></span><br><span class=\"line\">git push //默认推送约等于下一行命名，前提没有更改默认远程链接</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n<h4 id=\"远程仓库的移除与重命名\"><a href=\"#远程仓库的移除与重命名\" class=\"headerlink\" title=\"远程仓库的移除与重命名\"></a>远程仓库的移除与重命名</h4><p>重命名pb为paul。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote rename pb paul</span><br><span class=\"line\">git remote</span><br><span class=\"line\">origin</span><br><span class=\"line\">paul</span><br></pre></td></tr></table></figure>\n<p>删除paul。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote rm paul</span><br><span class=\"line\">git remote</span><br><span class=\"line\">origin</span><br></pre></td></tr></table></figure>\n<h3 id=\"打标签\"><a href=\"#打标签\" class=\"headerlink\" title=\"打标签\"></a>打标签</h3><h4 id=\"列出标签\"><a href=\"#列出标签\" class=\"headerlink\" title=\"列出标签\"></a>列出标签</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag</span><br></pre></td></tr></table></figure>\n<h4 id=\"创建标签\"><a href=\"#创建标签\" class=\"headerlink\" title=\"创建标签\"></a>创建标签</h4><p>附加标签，带有打标签者的信息，推荐使用。使用 <code>git show</code> 命令可以看到标签信息与对应的提交信息。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag -a v1.4 -m &apos;my version 1.4&apos;</span><br><span class=\"line\">git tag</span><br><span class=\"line\">v0.1</span><br><span class=\"line\">v1.3</span><br><span class=\"line\">v1.4</span><br></pre></td></tr></table></figure>\n<p>轻量标签本质上是将提交校验和存储到一个文件中 - 没有保存任何其他信息。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag v1.4-lw</span><br><span class=\"line\">git tag</span><br><span class=\"line\"></span><br><span class=\"line\">v0.1</span><br><span class=\"line\">v1.3</span><br><span class=\"line\">v1.4</span><br><span class=\"line\">v1.4-lw</span><br></pre></td></tr></table></figure>\n<h4 id=\"后期打标签\"><a href=\"#后期打标签\" class=\"headerlink\" title=\"后期打标签\"></a>后期打标签</h4><p>查看历史并标记</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log --pretty=oneline</span><br><span class=\"line\"></span><br><span class=\"line\">166ae0c4d3f420721acbb115cc33848dfcc2121a started write support</span><br><span class=\"line\">9fceb02d0ae598e95dc970b74767f19372d61af8 updated rakefile</span><br><span class=\"line\">964f16d36dfccde844893cac5b347e7b3d44abbc commit the todo</span><br><span class=\"line\">git tag -a v1.2 9fceb02</span><br><span class=\"line\">git tag</span><br><span class=\"line\"></span><br><span class=\"line\">v1.2</span><br></pre></td></tr></table></figure>\n<h4 id=\"共享标签\"><a href=\"#共享标签\" class=\"headerlink\" title=\"共享标签\"></a>共享标签</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin v1.5</span><br></pre></td></tr></table></figure>\n<h4 id=\"检出标签\"><a href=\"#检出标签\" class=\"headerlink\" title=\"检出标签\"></a>检出标签</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout -b [branchname] [tagname]</span><br></pre></td></tr></table></figure>\n<h3 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h3><h4 id=\"创建\"><a href=\"#创建\" class=\"headerlink\" title=\"创建\"></a>创建</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch [branchName]</span><br></pre></td></tr></table></figure>\n<h4 id=\"切换\"><a href=\"#切换\" class=\"headerlink\" title=\"切换\"></a>切换</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout [branchName]</span><br></pre></td></tr></table></figure>\n<p>快捷创建切换使用<code>$ git checkout -b [branchName]</code></p>\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch -d [branchName]</span><br></pre></td></tr></table></figure>\n<h4 id=\"整合\"><a href=\"#整合\" class=\"headerlink\" title=\"整合\"></a>整合</h4><p>简单的整合</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout master</span><br><span class=\"line\">git merge [branchName]</span><br></pre></td></tr></table></figure>\n<p>变基整合<br>切换experiment分支，根据与master公共祖先整合</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout experiment</span><br><span class=\"line\">git rebase master</span><br><span class=\"line\">git checkout master</span><br><span class=\"line\">git merge experiment</span><br></pre></td></tr></table></figure>\n<p>More info <a href=\"https://git-scm.com/book/en/v2/Git-Branching-Rebasing\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/en/v2/Git-Branching-Rebasing</a></p>\n<h3 id=\"生成ssh密钥\"><a href=\"#生成ssh密钥\" class=\"headerlink\" title=\"生成ssh密钥\"></a>生成ssh密钥</h3><p>enter跳过，默认无密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C &quot;email&quot;</span><br></pre></td></tr></table></figure>\n<p>可查看是否生成ssh。id_dsa.pub是公钥，用于github之类的托管库来添加ssh。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/.ssh</span><br><span class=\"line\">ls</span><br><span class=\"line\">id_dsa       known_hosts</span><br><span class=\"line\">config            id_dsa.pub</span><br><span class=\"line\"></span><br><span class=\"line\">//查看公钥</span><br><span class=\"line\">vim id_dsa.pub</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"补充\"><a href=\"#补充\" class=\"headerlink\" title=\"补充\"></a>补充</h2><h3 id=\"克隆库使用的https协议，修改ssh协议\"><a href=\"#克隆库使用的https协议，修改ssh协议\" class=\"headerlink\" title=\"克隆库使用的https协议，修改ssh协议\"></a>克隆库使用的https协议，修改ssh协议</h3><p>在.git文件夹中，通过编辑器打开config文件，设置https地址为ssh地址。</p>\n<h3 id=\"gitignore规则不生效\"><a href=\"#gitignore规则不生效\" class=\"headerlink\" title=\".gitignore规则不生效\"></a><code>.gitignore</code>规则不生效</h3><p>在开发过程中，想忽略某个文件或文件夹，将其添加入<code>.gitignore</code>,规则存在不生效，其原因是已被纳入版本管理中，要想删除，需要清除本地缓存：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rm -r --cached .</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &apos;update .gitignone&apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建可推送远程分支的分支\"><a href=\"#创建可推送远程分支的分支\" class=\"headerlink\" title=\"创建可推送远程分支的分支\"></a>创建可推送远程分支的分支</h3><p>本地创建分支，并直接可以推送到远程相应分支。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##前提是远程有test仓库，如果没有先创建推送，在执行此命令</span><br><span class=\"line\">git checkout -b [bracnh] origin/[branch]</span><br><span class=\"line\"></span><br><span class=\"line\">##已创建本地分支track远程分支</span><br><span class=\"line\">git branch --set-upstream [branch] [remote-branch]</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看本地分支跟踪的远程分支\"><a href=\"#查看本地分支跟踪的远程分支\" class=\"headerlink\" title=\"查看本地分支跟踪的远程分支\"></a>查看本地分支跟踪的远程分支</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 当前分支跟踪的远程分支</span><br><span class=\"line\">git branch -vv</span><br><span class=\"line\"></span><br><span class=\"line\"># 所有分支跟踪的远程分支</span><br><span class=\"line\">git branch -vv -a</span><br></pre></td></tr></table></figure>\n<h3 id=\"远程库迁移且保存历史提交记录\"><a href=\"#远程库迁移且保存历史提交记录\" class=\"headerlink\" title=\"远程库迁移且保存历史提交记录\"></a>远程库迁移且保存历史提交记录</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 方法一：克隆镜像，推送镜像到新的远程库</span><br><span class=\"line\">git clone --bare git://1xxx/project_name.git</span><br><span class=\"line\">cd project_name.git</span><br><span class=\"line\">git push --mirror git://2xxx/project_name.git</span><br><span class=\"line\"></span><br><span class=\"line\"># 方法二：克隆到本地，修改远程库推送地址</span><br><span class=\"line\">git remote set-url [--push] &lt;name&gt; &lt;newurl&gt; [&lt;oldurl&gt;]</span><br></pre></td></tr></table></figure>\n<h3 id=\"撤回操作\"><a href=\"#撤回操作\" class=\"headerlink\" title=\"撤回操作\"></a>撤回操作</h3><h4 id=\"工作区\"><a href=\"#工作区\" class=\"headerlink\" title=\"工作区\"></a>工作区</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 撤回工作区</span><br><span class=\"line\">git checkout .</span><br><span class=\"line\">git checkout -- &lt;file&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"暂存区\"><a href=\"#暂存区\" class=\"headerlink\" title=\"暂存区\"></a>暂存区</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># git追踪过的某个文件</span><br><span class=\"line\">git reset &lt;file&gt;</span><br><span class=\"line\"># git未追踪过的新文件</span><br><span class=\"line\">git reset HEAD &lt;file&gt;</span><br><span class=\"line\"># 完全移除不需要</span><br><span class=\"line\">git reset --hard</span><br></pre></td></tr></table></figure>\n<h4 id=\"本地提交\"><a href=\"#本地提交\" class=\"headerlink\" title=\"本地提交\"></a>本地提交</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 回退到某个分支,--hard慎用</span><br><span class=\"line\">git reset --hard [&lt;commit&gt;]</span><br><span class=\"line\"># 撤回上一次提交，但保存修改的文件到暂存区</span><br><span class=\"line\">git reset --soft HEAD~1</span><br><span class=\"line\"></span><br><span class=\"line\"># 回退另一种方式</span><br><span class=\"line\">git checkout [&lt;commit&gt;]</span><br></pre></td></tr></table></figure>\n<h4 id=\"远程库\"><a href=\"#远程库\" class=\"headerlink\" title=\"远程库\"></a>远程库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 通过上述的回退后，强制推送远程</span><br><span class=\"line\">git push -f</span><br></pre></td></tr></table></figure>\n<h4 id=\"撤销撤回的操作\"><a href=\"#撤销撤回的操作\" class=\"headerlink\" title=\"撤销撤回的操作\"></a>撤销撤回的操作</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查看回退的commitId</span><br><span class=\"line\">git reflog</span><br><span class=\"line\">git reset --hard [&lt;commit&gt;]</span><br></pre></td></tr></table></figure>\n<p>更多信息详见git官网<br><a href=\"https://git-scm.com/book/zh/v2\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/zh/v2</a></p>\n","more":"</p>\n<h2 id=\"下载安装git\"><a href=\"#下载安装git\" class=\"headerlink\" title=\"下载安装git\"></a>下载安装git</h2><p>在Windows上安装需在官网<a href=\"https://git-scm.com/downloads\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/downloads</a>下载，傻瓜式安装，默认下一步，添加环境变量路径（默认勾选）。</p>\n<h3 id=\"测试是否安装成功\"><a href=\"#测试是否安装成功\" class=\"headerlink\" title=\"测试是否安装成功\"></a>测试是否安装成功</h3><p>安装完成后通过<code>git --version</code>测试是否安装成功，成功会出现版本号。<br><img src=\"/images/git_01.png\" alt=\"1\"></p>\n<h3 id=\"运行前配置\"><a href=\"#运行前配置\" class=\"headerlink\" title=\"运行前配置\"></a>运行前配置</h3><p>用户信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name &quot;Your Name&quot;</span><br><span class=\"line\">git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure>\n<p>文本编辑器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global core.editor emacs</span><br></pre></td></tr></table></figure>\n<p>检查配置信息<code>$ git config --list</code></p>\n<hr>\n<h2 id=\"常用语法\"><a href=\"#常用语法\" class=\"headerlink\" title=\"常用语法\"></a>常用语法</h2><h3 id=\"获取帮助\"><a href=\"#获取帮助\" class=\"headerlink\" title=\"获取帮助\"></a>获取帮助</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git --help</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建版本库\"><a href=\"#创建版本库\" class=\"headerlink\" title=\"创建版本库\"></a>创建版本库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir yourDir</span><br><span class=\"line\">cd yourDir</span><br><span class=\"line\">git init</span><br></pre></td></tr></table></figure>\n<h3 id=\"添加暂存区\"><a href=\"#添加暂存区\" class=\"headerlink\" title=\"添加暂存区\"></a>添加暂存区</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add *.c</span><br><span class=\"line\">git add LICENSE</span><br></pre></td></tr></table></figure>\n<h3 id=\"提交更新\"><a href=\"#提交更新\" class=\"headerlink\" title=\"提交更新\"></a>提交更新</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m &apos;initial project version&apos;</span><br></pre></td></tr></table></figure>\n<p>快捷添加暂存区并提交 <code>$ git commit -a -m &#39;initial project version&#39;</code></p>\n<h3 id=\"克隆现有仓库\"><a href=\"#克隆现有仓库\" class=\"headerlink\" title=\"克隆现有仓库\"></a>克隆现有仓库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone [url]</span><br></pre></td></tr></table></figure>\n<h3 id=\"检查文件当前状态\"><a href=\"#检查文件当前状态\" class=\"headerlink\" title=\"检查文件当前状态\"></a>检查文件当前状态</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status</span><br></pre></td></tr></table></figure>\n<h3 id=\"忽略文件\"><a href=\"#忽略文件\" class=\"headerlink\" title=\"忽略文件\"></a>忽略文件</h3><p>在.gitignore中可以通过正则或者添加文件来忽略git的监视，例如如下文件配置。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.DS_Store</span><br><span class=\"line\">Thumbs.db</span><br><span class=\"line\">db.json</span><br><span class=\"line\">*.log</span><br><span class=\"line\">node_modules/</span><br><span class=\"line\">public/</span><br><span class=\"line\">.deploy*/</span><br></pre></td></tr></table></figure>\n<h3 id=\"移除文件\"><a href=\"#移除文件\" class=\"headerlink\" title=\"移除文件\"></a>移除文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rm [file]</span><br></pre></td></tr></table></figure>\n<h3 id=\"移动文件\"><a href=\"#移动文件\" class=\"headerlink\" title=\"移动文件\"></a>移动文件</h3><p>git不能移动文件，可以看做改名，重命名。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git mv file_from file_to</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看提交历史\"><a href=\"#查看提交历史\" class=\"headerlink\" title=\"查看提交历史\"></a>查看提交历史</h3><p>默认不用任何参数的话，git log 会按提交时间列出所有的更新，最近的更新排在最上面。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log</span><br></pre></td></tr></table></figure>\n<p>一个常用的选项是 -p，用来显示每次提交的内容差异。 你也可以加上 -2 来仅显示最近两次提交：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log -p -2</span><br></pre></td></tr></table></figure>\n<p>More info      <a href=\"https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History</a></p>\n<h3 id=\"撤销操作\"><a href=\"#撤销操作\" class=\"headerlink\" title=\"撤销操作\"></a>撤销操作</h3><h4 id=\"取消暂存的文件\"><a href=\"#取消暂存的文件\" class=\"headerlink\" title=\"取消暂存的文件\"></a>取消暂存的文件</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset HEAD &lt;file&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改上一次提交\"><a href=\"#修改上一次提交\" class=\"headerlink\" title=\"修改上一次提交\"></a>修改上一次提交</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m &apos;initial commit&apos;</span><br><span class=\"line\">git add forgotten_file</span><br><span class=\"line\">git commit --amend</span><br></pre></td></tr></table></figure>\n<p>More info <a href=\"https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things</a></p>\n<h3 id=\"远程仓库\"><a href=\"#远程仓库\" class=\"headerlink\" title=\"远程仓库\"></a>远程仓库</h3><h4 id=\"查看远程仓库\"><a href=\"#查看远程仓库\" class=\"headerlink\" title=\"查看远程仓库\"></a>查看远程仓库</h4><p>加参数-v，可以看到url，不加只有简写名称<br>加show [remote-name]，可以获取该仓库的具体信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote -v</span><br></pre></td></tr></table></figure>\n<h4 id=\"添加远程仓库\"><a href=\"#添加远程仓库\" class=\"headerlink\" title=\"添加远程仓库\"></a>添加远程仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add &lt;shortname&gt; &lt;url&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"拉取远程仓库\"><a href=\"#拉取远程仓库\" class=\"headerlink\" title=\"拉取远程仓库\"></a>拉取远程仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git fetch [remote-name]</span><br></pre></td></tr></table></figure>\n<p>git fetch 与 git pull的区别在于，git fetch不会自动merge，需要你手动完成。</p>\n<h4 id=\"推送远程仓库\"><a href=\"#推送远程仓库\" class=\"headerlink\" title=\"推送远程仓库\"></a>推送远程仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push [remote-name] [branch-name]</span><br><span class=\"line\"></span><br><span class=\"line\">git push //默认推送约等于下一行命名，前提没有更改默认远程链接</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n<h4 id=\"远程仓库的移除与重命名\"><a href=\"#远程仓库的移除与重命名\" class=\"headerlink\" title=\"远程仓库的移除与重命名\"></a>远程仓库的移除与重命名</h4><p>重命名pb为paul。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote rename pb paul</span><br><span class=\"line\">git remote</span><br><span class=\"line\">origin</span><br><span class=\"line\">paul</span><br></pre></td></tr></table></figure>\n<p>删除paul。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote rm paul</span><br><span class=\"line\">git remote</span><br><span class=\"line\">origin</span><br></pre></td></tr></table></figure>\n<h3 id=\"打标签\"><a href=\"#打标签\" class=\"headerlink\" title=\"打标签\"></a>打标签</h3><h4 id=\"列出标签\"><a href=\"#列出标签\" class=\"headerlink\" title=\"列出标签\"></a>列出标签</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag</span><br></pre></td></tr></table></figure>\n<h4 id=\"创建标签\"><a href=\"#创建标签\" class=\"headerlink\" title=\"创建标签\"></a>创建标签</h4><p>附加标签，带有打标签者的信息，推荐使用。使用 <code>git show</code> 命令可以看到标签信息与对应的提交信息。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag -a v1.4 -m &apos;my version 1.4&apos;</span><br><span class=\"line\">git tag</span><br><span class=\"line\">v0.1</span><br><span class=\"line\">v1.3</span><br><span class=\"line\">v1.4</span><br></pre></td></tr></table></figure>\n<p>轻量标签本质上是将提交校验和存储到一个文件中 - 没有保存任何其他信息。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag v1.4-lw</span><br><span class=\"line\">git tag</span><br><span class=\"line\"></span><br><span class=\"line\">v0.1</span><br><span class=\"line\">v1.3</span><br><span class=\"line\">v1.4</span><br><span class=\"line\">v1.4-lw</span><br></pre></td></tr></table></figure>\n<h4 id=\"后期打标签\"><a href=\"#后期打标签\" class=\"headerlink\" title=\"后期打标签\"></a>后期打标签</h4><p>查看历史并标记</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log --pretty=oneline</span><br><span class=\"line\"></span><br><span class=\"line\">166ae0c4d3f420721acbb115cc33848dfcc2121a started write support</span><br><span class=\"line\">9fceb02d0ae598e95dc970b74767f19372d61af8 updated rakefile</span><br><span class=\"line\">964f16d36dfccde844893cac5b347e7b3d44abbc commit the todo</span><br><span class=\"line\">git tag -a v1.2 9fceb02</span><br><span class=\"line\">git tag</span><br><span class=\"line\"></span><br><span class=\"line\">v1.2</span><br></pre></td></tr></table></figure>\n<h4 id=\"共享标签\"><a href=\"#共享标签\" class=\"headerlink\" title=\"共享标签\"></a>共享标签</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin v1.5</span><br></pre></td></tr></table></figure>\n<h4 id=\"检出标签\"><a href=\"#检出标签\" class=\"headerlink\" title=\"检出标签\"></a>检出标签</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout -b [branchname] [tagname]</span><br></pre></td></tr></table></figure>\n<h3 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h3><h4 id=\"创建\"><a href=\"#创建\" class=\"headerlink\" title=\"创建\"></a>创建</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch [branchName]</span><br></pre></td></tr></table></figure>\n<h4 id=\"切换\"><a href=\"#切换\" class=\"headerlink\" title=\"切换\"></a>切换</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout [branchName]</span><br></pre></td></tr></table></figure>\n<p>快捷创建切换使用<code>$ git checkout -b [branchName]</code></p>\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch -d [branchName]</span><br></pre></td></tr></table></figure>\n<h4 id=\"整合\"><a href=\"#整合\" class=\"headerlink\" title=\"整合\"></a>整合</h4><p>简单的整合</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout master</span><br><span class=\"line\">git merge [branchName]</span><br></pre></td></tr></table></figure>\n<p>变基整合<br>切换experiment分支，根据与master公共祖先整合</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout experiment</span><br><span class=\"line\">git rebase master</span><br><span class=\"line\">git checkout master</span><br><span class=\"line\">git merge experiment</span><br></pre></td></tr></table></figure>\n<p>More info <a href=\"https://git-scm.com/book/en/v2/Git-Branching-Rebasing\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/en/v2/Git-Branching-Rebasing</a></p>\n<h3 id=\"生成ssh密钥\"><a href=\"#生成ssh密钥\" class=\"headerlink\" title=\"生成ssh密钥\"></a>生成ssh密钥</h3><p>enter跳过，默认无密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C &quot;email&quot;</span><br></pre></td></tr></table></figure>\n<p>可查看是否生成ssh。id_dsa.pub是公钥，用于github之类的托管库来添加ssh。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/.ssh</span><br><span class=\"line\">ls</span><br><span class=\"line\">id_dsa       known_hosts</span><br><span class=\"line\">config            id_dsa.pub</span><br><span class=\"line\"></span><br><span class=\"line\">//查看公钥</span><br><span class=\"line\">vim id_dsa.pub</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"补充\"><a href=\"#补充\" class=\"headerlink\" title=\"补充\"></a>补充</h2><h3 id=\"克隆库使用的https协议，修改ssh协议\"><a href=\"#克隆库使用的https协议，修改ssh协议\" class=\"headerlink\" title=\"克隆库使用的https协议，修改ssh协议\"></a>克隆库使用的https协议，修改ssh协议</h3><p>在.git文件夹中，通过编辑器打开config文件，设置https地址为ssh地址。</p>\n<h3 id=\"gitignore规则不生效\"><a href=\"#gitignore规则不生效\" class=\"headerlink\" title=\".gitignore规则不生效\"></a><code>.gitignore</code>规则不生效</h3><p>在开发过程中，想忽略某个文件或文件夹，将其添加入<code>.gitignore</code>,规则存在不生效，其原因是已被纳入版本管理中，要想删除，需要清除本地缓存：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rm -r --cached .</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &apos;update .gitignone&apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建可推送远程分支的分支\"><a href=\"#创建可推送远程分支的分支\" class=\"headerlink\" title=\"创建可推送远程分支的分支\"></a>创建可推送远程分支的分支</h3><p>本地创建分支，并直接可以推送到远程相应分支。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##前提是远程有test仓库，如果没有先创建推送，在执行此命令</span><br><span class=\"line\">git checkout -b [bracnh] origin/[branch]</span><br><span class=\"line\"></span><br><span class=\"line\">##已创建本地分支track远程分支</span><br><span class=\"line\">git branch --set-upstream [branch] [remote-branch]</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看本地分支跟踪的远程分支\"><a href=\"#查看本地分支跟踪的远程分支\" class=\"headerlink\" title=\"查看本地分支跟踪的远程分支\"></a>查看本地分支跟踪的远程分支</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 当前分支跟踪的远程分支</span><br><span class=\"line\">git branch -vv</span><br><span class=\"line\"></span><br><span class=\"line\"># 所有分支跟踪的远程分支</span><br><span class=\"line\">git branch -vv -a</span><br></pre></td></tr></table></figure>\n<h3 id=\"远程库迁移且保存历史提交记录\"><a href=\"#远程库迁移且保存历史提交记录\" class=\"headerlink\" title=\"远程库迁移且保存历史提交记录\"></a>远程库迁移且保存历史提交记录</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 方法一：克隆镜像，推送镜像到新的远程库</span><br><span class=\"line\">git clone --bare git://1xxx/project_name.git</span><br><span class=\"line\">cd project_name.git</span><br><span class=\"line\">git push --mirror git://2xxx/project_name.git</span><br><span class=\"line\"></span><br><span class=\"line\"># 方法二：克隆到本地，修改远程库推送地址</span><br><span class=\"line\">git remote set-url [--push] &lt;name&gt; &lt;newurl&gt; [&lt;oldurl&gt;]</span><br></pre></td></tr></table></figure>\n<h3 id=\"撤回操作\"><a href=\"#撤回操作\" class=\"headerlink\" title=\"撤回操作\"></a>撤回操作</h3><h4 id=\"工作区\"><a href=\"#工作区\" class=\"headerlink\" title=\"工作区\"></a>工作区</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 撤回工作区</span><br><span class=\"line\">git checkout .</span><br><span class=\"line\">git checkout -- &lt;file&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"暂存区\"><a href=\"#暂存区\" class=\"headerlink\" title=\"暂存区\"></a>暂存区</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># git追踪过的某个文件</span><br><span class=\"line\">git reset &lt;file&gt;</span><br><span class=\"line\"># git未追踪过的新文件</span><br><span class=\"line\">git reset HEAD &lt;file&gt;</span><br><span class=\"line\"># 完全移除不需要</span><br><span class=\"line\">git reset --hard</span><br></pre></td></tr></table></figure>\n<h4 id=\"本地提交\"><a href=\"#本地提交\" class=\"headerlink\" title=\"本地提交\"></a>本地提交</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 回退到某个分支,--hard慎用</span><br><span class=\"line\">git reset --hard [&lt;commit&gt;]</span><br><span class=\"line\"># 撤回上一次提交，但保存修改的文件到暂存区</span><br><span class=\"line\">git reset --soft HEAD~1</span><br><span class=\"line\"></span><br><span class=\"line\"># 回退另一种方式</span><br><span class=\"line\">git checkout [&lt;commit&gt;]</span><br></pre></td></tr></table></figure>\n<h4 id=\"远程库\"><a href=\"#远程库\" class=\"headerlink\" title=\"远程库\"></a>远程库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 通过上述的回退后，强制推送远程</span><br><span class=\"line\">git push -f</span><br></pre></td></tr></table></figure>\n<h4 id=\"撤销撤回的操作\"><a href=\"#撤销撤回的操作\" class=\"headerlink\" title=\"撤销撤回的操作\"></a>撤销撤回的操作</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查看回退的commitId</span><br><span class=\"line\">git reflog</span><br><span class=\"line\">git reset --hard [&lt;commit&gt;]</span><br></pre></td></tr></table></figure>\n<p>更多信息详见git官网<br><a href=\"https://git-scm.com/book/zh/v2\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/zh/v2</a></p>","categories":[{"name":"工具","path":"api/categories/工具.json"}],"tags":[{"name":"git","path":"api/tags/git.json"}]}